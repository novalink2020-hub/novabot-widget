/* ==========================================================
   NovaBot v6.9.8 – UI Styles (Shadow DOM)
   نسخة محسّنة بالكامل – مرحلة 1
   ========================================================== */

/* تحميل خط Tajawal داخل الـ Shadow DOM */
@import url("https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap");

/* خط موحّد لكل شيء */
:host,
* {
  font-family: "Tajawal", system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
  box-sizing: border-box;
}

/* زيادة طفيفة في أحجام الخطوط (تحسين القراءة) */
body,
div,
span,
button,
textarea {
  font-size: 15px;
}

/* ألوان الأساس */
:root {
  --nova-blue: #1b577c;
  --nova-blue-deep: #0f2c46;
  --nova-blue-dark: #09141f;
  --nova-orange: #fe930e;
  --nova-bg-dark: #050b14;
  --nova-text-light: #f5f7ff;
}

/* ============ الزر العائم ============ */
.nova-fab {
  position: fixed;
  bottom: 22px;
  right: 22px;
  z-index: 9999;
  width: clamp(74px, 13vw, 98px);
  height: clamp(74px, 13vw, 98px);
  border-radius: 999px;
  border: none;
  padding: 0;
  background: radial-gradient(circle at 20% 20%, #fe930e, #1b577c 70%);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow:
    0 10px 30px rgba(0, 0, 0, 0.45),
    0 0 0 2px rgba(255, 255, 255, 0.08);
  transition:
    transform 0.25s ease,
    box-shadow 0.25s ease,
    filter 0.25s ease,
    opacity 0.25s ease;
}

.nova-fab-inner {
  width: 82%;
  height: 82%;
  border-radius: inherit;
  background: rgba(9, 19, 30, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
}

.nova-fab-inner img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.nova-fab:hover {
  transform: translateY(-3px) scale(1.03);
  filter: drop-shadow(0 0 12px rgba(254, 147, 14, 0.6));
}

/* النبضة */
@keyframes novaPulse {
  0%, 100% { transform: translateY(0) scale(1); }
  25% { transform: translateY(-3px) scale(1.02); }
  50% { transform: translateY(2px) scale(0.99); }
  75% { transform: translateY(-1px) scale(1.01); }
}
.nova-fab.nova-idle { animation: novaPulse 0.9s ease-in-out 1; }

/* ============ الخلفية ============ */
.nova-chat-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.72);
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.35s ease;
}
.nova-chat-backdrop.nova-open {
  opacity: 1;
  pointer-events: auto;
}

/* ============ نافذة الشات ============ */
.nova-chat-shell {
  position: relative;
  margin: 16px 16px 112px 16px;
  width: min(420px, 100vw - 32px);
  height: min(560px, 80vh);
  border-radius: 18px;
  background: radial-gradient(circle at 0% 0%, #132033, #050b14 60%);
  border: 1px solid rgba(192, 209, 224, 0.22);
  box-shadow: 0 22px 60px rgba(0, 0, 0, 0.55);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform-origin: bottom right;
  transform: translateY(24px) scale(0.9);
  opacity: 0;
  transition:
    transform 0.35s cubic-bezier(0.23,1,0.32,1.1),
    opacity 0.35s ease;
}
.nova-chat-backdrop.nova-open .nova-chat-shell {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* ============ الهيدر ============ */
.nova-chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 14px;
  margin: 8px;
  border-radius: 16px;
  background: linear-gradient(135deg, #0e1a28, #18324d);
  box-shadow: 0 6px 16px rgba(0,0,0,0.45);
}

/* صورة نوفا بوت – توحيد الخلفية و إضافة ظل */
.nova-header-avatar {
  width: 38px;
  height: 56px;
  border-radius: 999px;
  background: rgba(7, 15, 24, 0.96);
  border: 1.6px solid #fe930e;
  box-shadow: 0 0 8px rgba(254,147,14,0.45);
  overflow: hidden;
}
.nova-header-avatar img { width: 100%; height: 100%; object-fit: contain; }

/* اسم NOVABOT */
.nova-header-title {
  font-size: 15px;
  font-weight: 700;
}

/* زر × — محسّن وبداخل الهيدر */
.nova-header-close {
  background: rgba(255,255,255,0.07);
  border: 1px solid rgba(255,255,255,0.18);
  width: 28px;
  height: 28px;
  border-radius: 999px;
  color: #fff;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
}
.nova-header-close:hover {
  background: rgba(255,255,255,0.12);
  transform: scale(1.06);
}

/* الوضع النهاري – تحسين زر الإغلاق والكتابة */
@media (max-width: 1024px) and (prefers-color-scheme: light) {

  .nova-chat-header {
    background: linear-gradient(135deg, #ffffff, #eaf2fb);
    box-shadow: 0 6px 12px rgba(27,87,124,0.20);
  }

  .nova-header-close {
    background: rgba(27,87,124,0.15);
    border: 1px solid rgba(27,87,124,0.35);
    color: #1b577c;
  }
  .nova-header-close:hover {
    background: rgba(27,87,124,0.22);
  }

  .nova-header-title,
  .nova-bot-name {
    color: var(--nova-blue-deep);
  }
}

/* ============ جسم المحادثة ============ */
.nova-chat-body {
  flex: 1;
  padding: 10px 14px 90px 14px;
  overflow-y: auto;
  background: linear-gradient(145deg, #0b1824, #050b14);
  color: var(--nova-text-light);
}

/* ============ فقاعات المحادثة ============ */
.nova-bubble {
  max-width: 78%;
  padding: 12px 14px;
  border-radius: 14px;
  line-height: 1.75;
  font-size: 15px;
}

/* فقاعة البوت – الوضع النهاري الغامق */
@media (prefers-color-scheme: light) and (max-width: 1024px) {
  .nova-bubble-bot {
    background: #ffffff;
    border-color: rgba(27,87,124,0.22);
    color: #0f2c46 !important;
  }

  /* اسم NOVABOT داخل الفقاعة */
  .nova-bot-name {
    color: #0f2c46 !important;
  }

  /* الروابط */
  .nova-bubble-content a {
    color: #1b577c;
  }
  .nova-bubble-content a:hover {
    color: #fe930e !important;
  }
}

/* ============ الفوتر ============ */
.nova-footer-row {
  position: absolute;
  left: 0; right: 0; bottom: 0;
  padding: 10px 12px;
  display: flex;
  align-items: flex-end;
  gap: 10px;

  /* شفاف + قابل للتعديل */
  background: linear-gradient(
    to bottom,
    rgba(0,0,0,0.00) 0%,
    rgba(0,0,0,0.22) 55%,
    rgba(0,0,0,0.38) 100%
  );

  /* ✨ تعديل البلار – يمكنك تغييره */
  backdrop-filter: blur(2px);
}

/* الوضع النهاري للفوتر */
@media (prefers-color-scheme: light) and (max-width: 1024px) {
  .nova-footer-row {
    background: linear-gradient(
      to bottom,
      rgba(255,255,255,0.00) 0%,
      rgba(255,255,255,0.35) 55%,
      rgba(255,255,255,0.60) 100%
    );
    backdrop-filter: blur(2px);
  }
}

/* زر الإرسال — ثابت الارتفاع (لا يتمدد) */
.nova-send-btn {
  min-height: 44px;
  height: 44px;
  align-self: flex-end;
}

/* حقل الكتابة */
.nova-input {
  min-height: 42px;
  max-height: 110px;
  font-size: 15px;
  line-height: 1.7;
}
